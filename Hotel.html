<html>

<head>

	<script>

		var hotel = prompt("Qual o nome do Hotel?");
		alert("O nome do Hotel é " + hotel);

		var nome = prompt("Qual seu nome?");

		senha();

		alert("Bem vindo ao Hotel " + hotel + " " + nome + ". É um imenso prazer ter você por aqui")

		function senha() {
			var senha = prompt("Digite a senha");
			while (senha != 2678) {
				alert("Senha errada.");
				senha = prompt("Tente Novamente");
			}

			return true;

		}

		function inicio() {

			var escolha = parseInt(prompt('Selecione uma opção\n\n 1.) Reserva de Quartos\n 2.) Cadastro de Hóspedes\n 3.) Abastecimento de Carros\n 4.) Eventos\n 5.) Manutenção\n 6.) Sair'));

			switch (escolha) {
				case 1:
					reserva_quartos();
					break;
				case 2:
					menu_cadastro();
					break;
				case 3:
					abastecer_carros();
					break;
				case 4:
					eventos();
					break;
				case 5: 
					manutencao()
					break;
				case 6:
					sair();
					break;
				default:
					erro();
					break;
			}

		}

		function reserva_quartos() {
			alert('HOTEL ' + hotel + ' - RESERVA DE QUARTOS');

			var valor = parseFloat(prompt("Qual o valor padrão da diária?"));
			if (valor < 0) {
				alert("Valor inválido, " + nome);
			} else {
				var dias = parseFloat(prompt("Quantas diárias serão necessárias"));
				if (dias < 0) {
					alert("Valor inváliso, " + nome);
				} else {
					var hospede = prompt("Qual o nome do hóspede?");
					   
				}
			}

			var preço = valor*dias

			var co = prompt(nome + ", você confirma a hospedagem para " + hospede + " por " + dias + " dias? S/N");

			if(co == "s" ){
				alert(nome + " reserva efetuada para " + hospede + ". O valor total é de " + preço + ".");
			} else if(co == "n") {
				alert(nome + ", reserva não efetuada")
					inicio();
			}

			inicio();
		}

		function menu_cadastro(){

			var menu = parseInt(prompt("Selecione uma opção:\n\n 1. Cadastrar\n 2. Pesquisar\n 3-listar\n 4. Voltar"));
			switch(menu){
				case 1: 
					cadastro_hospedes();
					break;
				case 2:
					pesquisar_hospedes();
					break;
				case 3:
					listar_hospeder();
					break;
				case 4: 
					inicio();
					break;
				default:
					erro();
					break;
			}
		};

		function pesquisar_hospedes(){

			let nomecadastrado = prompt('Por favor, informe o nome da(o) hóspede para pesquisa:');
// O método includes() procura por um elemento dentro do Array e retorna verdadeiro ou falso. Caso queira comparar números, o mais indicado é o método find();

			if (hospedeArray.includes(nomecadastrado)) {
				alert(nomecadastrado + ' encontrada(o).');
			} else {
				alert(nomecadastrado + ' não foi encontrada(o).');
			}

			sistema_cadastrar_hospedes();

		};

		function listar_hospeder(){

			for (var i = 0; i < hospedes.length; i++) {
    		alert("Nome: " + hospedes[i].nome + ", Idade: " + hospedes[i].idade);
}


		}

		function cadastro_hospedes() {
			alert('HOTEL ' + hotel + ' - CADASTRO DE HÓSPEDES');

			var gratuidade = 0;
			var meiaHospedagem = 0;
			var valorTotal = 0;
			var totalHospedes = 0;
			var valorpadrao = parseFloat(prompt("Qual o valor padrão da diária?"));
				if (valorpadrao <= 0){
					alert("Valor inválido");
					menu_cadastro();
			}

			var hospedeArray = [];

			while(true) { 
			var nomecadastrado = prompt("Qual o nome do hóspede?");
				if(nomecadastrado.toUpperCase() === "PARE"){
				}

			var idade = parseFloat(prompt("Qual a idade do hóspede?"));
			totalHospedes++;

			// ARRAY

			var objetoHospede = {
				nome: nomecadastrado,
				idade: idade
			};

			hospedeArray.push(objetoHospede);



				if(idade <= 6){
					alert(nomecadastrado + " cadastrado(a) com sucesso. " + nomecadastrado + " possui gratuidade");
					gratuidade++;
				} else if(idade >= 60){
					alert(nomecadastrado + " cadastrado(a) com sucesso. " + nomecadastrado + " paga meia");
					meiaHospedagem++
					valorTotal += valorpadrao / 2;
				} else if (idade > 6 && idade < 60){
					alert("Hóspede " + nomecadastrado + " foi cadastrada(o) com sucesso!");
					menu_cadastro();
					
				}else if(totalHospedes > 15){
					alert("Máximo de cadastros atingido");
					break;
				}else{
					valorTotal += valorpadrao;
				}
			}

			alert(nome + " o valor total de hospedens é:" + valorTotal + "; " + meiaHospedagem + "meia(s); " + gratuidade + " gratuidade(s)" );

			
		}

		function eventos(){
			var menu_eventos = parseInt(prompt("Selecione uma opção:\n\n 1. Garçons\n 2. Buffet\n 3. Auditório\n 4. Restaurante 5. Voltar"));
			switch (menu_eventos){
				case 1: 
					garçon();
					break;
				case 2: 
					buffet();
					break;
				case 3:
					auditorio();
					break;
				case 4:
					restaurante();
					break;
				case 5:
					inicio();
					break;
				default: 
					erro();
					break;
			}
		}

		function garçon(){


			var duraçãoEvento = parseFloat(prompt("Qual a duração do evento em horas?"));
			var quantidadeGarçon = parseInt(prompt("Quantos garçons serão necessários?"));

			var calculoGarçon = (quantidadeGarçon * 10.50) * duraçãoEvento;
				
			alert("Custo total: " + calculoGarçon);

			var confirmação = prompt("Gostaria de efetuar a reserva? S/N");
				if(confirmação.toUpperCase() === "S"){
					alert(nome + ", reserva efetuada com sucesso.");
					eventos();
				} else if(confirmação.toUpperCase() === "N"){
					eventos();
				} else{
					erro();
				}
		}

		function buffet(){
			
			var agua = 0.5;
			var cafe = 0.2;
			var salgados = 7;

			var numeroConvidados = parseFloat(prompt("Qual o número de convidados para o evento?"));
			if (numeroConvidados > 150){
				alert("Quantidade de convidados superior à capacidade máxima.");
				eventos();
			} else{ 
				alert("O evento precisará de " + (numeroConvidados * cafe) + " litros de café, " + (numeroConvidados * agua) + " litros de agua, " + (numeroConvidados * salgados) + " salgados. O custo total do evento será de " + ((numeroConvidados * agua)+(numeroConvidados * cafe)+((salgados * (numeroConvidados / 100) * 34))));
			}


			var confirmaçãoBuffet = prompt("Gostaria de efetuar a reserva? S/N")
			if(confirmaçãoBuffet.toUpperCase() === "S"){
					alert(nome + ", reserva efetuada com sucesso.");
					eventos();
				} else if(confirmaçãoBuffet.toUpperCase() === "N"){
					eventos();
				} else{
					erro();
				}
		}

		function auditorio(){
   		
			var limiteLaranja = 150;
			var limiteExtraLaranja = 70;
			var limiteColorado = 350;
			var resultado;

			var escolhaAuditorio = parseInt(prompt("Qual o número de convidados para o seu evento?"));
				if(escolhaAuditorio <= 0 || escolhaAuditorio > 350){
					alert("Quantidade de convidados superior à capacidade máxima");

				} else if( escolhaAuditorio > (limiteLaranja + limiteExtraLaranja)) { 
					alert("Use o auditório Colorado");

				} else  {
					if(escolhaAuditorio > limiteLaranja){
						resultado = escolhaAuditorio - limiteLaranja
						alert("Use o áuditório laranja, inclua " + resultado + " cadeiras")
					} else {
						alert("Utilize o auditório laranja, sem cadeiras extras")
					}
				} inicio();
						
				}

		function restaurante(){

			var dia = prompt("Qual o dia do seu evento?");
			var hora = prompt("Qual a hora do seu evento?");
			var empresa;

			if(dia == "segunda" && hora >= 7 && hora <=23){
				empresa = prompt ("Qual o nome da empresa");
				alert("Restaurante reservado para " + empresa + ". Segunda ás " + hora);
			} else if (dia == "terça" && hora >= 7 && hora <= 23){
				empresa = prompt ("Qual o nome da empresa");
				alert("Restaurante reservado para" + empresa + ". Terça ás " + hora );
			}else if (dia == "quarta" && hora >= 7 && hora <= 23){
				empresa = prompt ("Qual o nome da empresa");
				alert("Restaurante reservado para" + empresa + ". Quarta ás " + hora );
			}else if (dia == "quinta" && hora >= 7 && hora <= 23){
				empresa = prompt ("Qual o nome da empresa");
				alert("Restaurante reservado para" + empresa + ". Quinta ás " + hora );
			}else if (dia == "sexta" && hora >= 7 && hora <= 23){
				empresa = prompt ("Qual o nome da empresa");
				alert("Restaurante reservado para" + empresa + ". Sexta ás " + hora );
			}else if (dia == "sabado" && hora >= 7 && hora <= 15){
				empresa = prompt ("Qual o nome da empresa");
				alert("Restaurante reservado para" + empresa + ". Sábado ás " + hora );
			}else if (dia == "domingo" && hora >= 7 && hora <= 15){
				empresa = prompt ("Qual o nome da empresa");
				alert("Restaurante reservado para" + empresa + ". Domingo ás " + hora );
			} else{
				alert("Restaurante indisponível");
			} inicio();
		} 

		function abastecer_carros() {
			alert('HOTEL ' + hotel + ' - ABASTECER');

			var alcoolWO = parseFloat(prompt("Qual o valor do álcool no posto Wayne Oil?"));
			var gasolinaWO = parseFloat(prompt("Qual o valor da gasolina no posto Wayne Oil?"));
			var alcoolSP = parseFloat(prompt("Qual o valor do álcool no posto Stark Petrol?"));
			var gasolinaSP = parseFloat(prompt("Qual o valor da gasolina no posto Stark Petrol?"));

			var litrosGWO = gasolinaWO * 42;
			var litrosGSP = gasolinaSP * 42;
			var litrosAWO = alcoolWO * 42;
			var litrosASP = alcoolSP * 42;
			var descontoWO = litrosAWO - (litrosAWO * 0.30);
			var descontoSP = litrosASP - (litrosASP * 0.30);

			if(descontoWO < litrosGWO && descontoWO < descontoSP && descontoWO < litrosGSP){
				alert(nome + " é mais barato abastecer com álcool no posto Wayne Oil");
			} else if (descontoSP < descontoWO && descontoSP < litrosGWO && descontoSP < litrosGSP){
				alert(nome + "é mais barato abastecer com álcool no posto  Stark Petrol");
			} else if (litrosGSP < litrosGWO && litrosGSP < descontoSP && litrosGSP < descontoWO){
				alert(nome + "é mais barato abastecer com gasolina no posto  Stark Petrol");
			} else {
				alert(nome + " é mais barato abastecer com gasolina no posto Wayne Oil");
			} inicio();
		}

		function manutencao(){

		let array1 = [];
    	let confimacao = confirm("Deseja cadastrar empresa?");

    	while(confimacao != false){
        let empresa = prompt("Qual o nome da empresa?");
        let valor = parseFloat(prompt("Qual o valor por aparelho?"));
        let quantidade = parseInt(prompt("Qual a quantidade de aparelhos?"));
        let desconto = parseInt(prompt("Qual a porcetagem de desconto?"));
        let porcetagem = desconto / 100;
        let minimo = parseInt(prompt("Qual o número mínimo de aparelhos para conseguir desconto?"));
        let total = (valor * quantidade) * (porcetagem / 100);
        if(desconto === 0){
            total = valor * quantidade;
        }
        if(quantidade >= minimo){
            total = (valor * quantidade) * (porcetagem / 100);
        }
        else{
            total = valor * quantidade;
        }
        const dados = {
            nome: empresa,
            valor: total
        }
        array1.push(dados);

        confimacao = confirm("Deseja cadastrar outra empresa?")
    }
    
    	//verificar qual o menor valor e mostrar o nome da empresa
    	let menor = array1[0].valor;
    	let nome = array1[0].nome;
    	for(let i = 0; i < array1.length; i++){
       		 if(array1[i].valor < menor){
          		  menor = array1[i].valor;
           		  nome = array1[i].nome;
        }
     }
   		 alert("A empresa com o menor valor é " + nome + " com o valor de R$ "+ menor.toFixed(2))
} inicio();


		
		function erro() {
			alert('Por favor, informe um número entre 1 e 4');
			inicio();
		}

		function sair() {
			var confirma = confirm('Você deseja sair?');
			if (confirma) {
				var adeus = alert("Muito obrigado e até logo, " + nome + ".");
				window.close();
			} else {
				inicio();
			}
		}

		inicio();
	</script>
</head>

<body>

</body>

</html>